nextflow_process {

    name "Test Process COPY"
    script "copy.nf"
    process "COPY"

    test("Should run without failures") {

        when {
            process {
                """
                input[0] = [
                    [id:"test"],
                    file("${baseDir}/data/test.paired_end.bam")
                ]
                """
            }
        }

        then {
            assert snapshot(process.out.bam.collect { bam(it[1]).getReads() }).match()
        }

    }

}
